!function(){function e(e){alert("Un error ocurri√≥: "+e.code)}function t(e){var t=e.coords.latitude,i=e.coords.longitude;console.log("Tu posicion es: "+t+","+i),$.getJSON(u+"lat="+t+"&lon="+i,n)}function n(e){S.zone=e.name,S.icon="svg/"+e.weather[0].icon+".svg",S.temp=e.main.temp-273.15,S.temp_max=e.main.temp_max-273.15,S.temp_min=e.main.temp_min-273.15,S.humi=e.main.humidity,S.wind=e.wind.speed,S.descrip=e.weather[0].description,S.main=e.weather[0].main,a(S)}function i(e){var t=document.querySelector(e);return document.importNode(t.content,!0)}function a(e,t){var n=i("#template--city"),a;a=t?t.split(" ")[1]:s,n.querySelector("[data-time]").innerHTML=a,n.querySelector("[data-icon]").src=e.icon,n.querySelector("[data-city]").innerHTML=e.zone,n.querySelector("[data-temp='max']").innerHTML=e.temp_max.toFixed(1),n.querySelector("[data-temp='min']").innerHTML=e.temp_min.toFixed(1),n.querySelector("[data-temp='current']").innerHTML=e.temp.toFixed(1),n.querySelector("[data-temp='wind']").innerHTML=e.wind,n.querySelector("[data-temp='humi']").innerHTML=e.humi,n.querySelector("[data-title]").innerHTML=e.main,$(g).hide(),$(f).append(n)}function o(e){e.preventDefault(),$.getJSON(u+"q="+$(h).val(),r)}function r(e){$.getJSON(d+$(h).val(),function(t){$(h).val(""),S={},S.zone=e.name,S.icon="svg/"+e.weather[0].icon+".svg",S.temp=e.main.temp-273.15,S.temp_max=e.main.temp_max-273.15,S.temp_min=e.main.temp_min-273.15,S.humi=e.main.humidity,S.wind=e.wind.speed,S.descrip=e.weather[0].description,S.main=e.weather[0].main,a(S,t.data.time_zone[0].localtime),y.push(S),localStorage.setItem("cities",JSON.stringify(y))})}function c(e){function t(e){e.forEach(function(e){a(e)})}e.preventDefault();var n=JSON.parse(localStorage.getItem("cities"));t(n)}var m="59c773846b7f98459610078551ef2",d="https://api.worldweatheronline.com/free/v2/tz.ashx?format=json&key="+m+"&q=",p="e5d63ee6a8b7d0f78e0a9c28d355b1bf",u="http://api.openweathermap.org/data/2.5/weather?APPID="+p+"&",l=new Date,s=l.getHours()+":"+l.getMinutes(),f=$("body"),g=$(".loader"),h=$("[data-input='cityAdd']"),v=$("[data-button='add']"),w=$("[data-saved-cities]"),y=[],S={};S.zone,S.icon,S.temp,S.temp_max,S.temp_min,S.humi,S.wind,S.descrip,S.main,$(v).on("click",o),$(h).on("keypress",function(e){13==e.which&&o(e)}),$(w).on("click",c),navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e):alert("Tu navegador no soporta Geolocation"),$(function(){function e(){$("form").slideToggle()}$(".circle").on("click",e)})}();